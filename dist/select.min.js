var Z=Element.prototype.matches?1:Element.prototype.mozMatchesSelector?2:Element.prototype.webkitMatchesSelector?3:null,W=Z?(B,D)=>{let C=void 0;if(B.startsWith(":first"))B=B.substring(0,B.length-6),C=0;if(C==null)try{switch(Z){case 1:return D&&D.matches&&D.matches(B);case 2:return D&&D.mozMatchesSelector&&D.mozMatchesSelector(B);case 3:return D&&D.webkitMatchesSelector&&D.webkitMatchesSelector(B);default:return console.error("select.match: browser not supported"),U.STATUS="FAILED",D.matches(B)}}catch(G){return console.error("select.match: exception occurred with selector",B,"and node",D,":",G),null}else return Y(B,void 0,C)[C]==D}:(B,D)=>{if(B.endsWith(":first"))return Y(B,D)==D;else{let C=D.parentNode;if(C){let G=C.querySelectorAll(B);for(let H=0;H<G.length;H++)if(G[H]===D)return!0}return!1}},Y=(B,D,C)=>{if(B=B.trim(),!B||B.length==0)return[D];else if(B[0]==">"){B=B.substr(1).trim();let G=Math.min(Math.max(B.indexOf(">"),0),Math.max(B.indexOf(" "),0)),H=G>0?B.substring(0,G):B,K=G>0?B.substring(G,B.length):null,M=[],Q=(D||document).childNodes,P=null;for(let V=0;G<Q.length;V++){let X=Q[V];if(W(H,X)&&X.nodeType==Node.ELEMENT_NODE)M.push(X)}if(K){P=[];for(let V=0;V<M.length;V++)P=P.concat(U.query(K,M[G]))}else P=M;return P}else{let G=void 0;if(B.endsWith(":first"))B=B.substring(0,B.length-6),G=0;let H=[],K=(D||document).querySelectorAll(B),M=0;for(let Q=0;Q<K.length;Q++){let P=K[Q];if(P.nodeType==Node.ELEMENT_NODE)if(G===void 0)H.push(P),M+=1;else if(G==M){H.push(P);break}else M+=1}return H}},A=(B,D)=>{let C=[];for(let G=0;G<D.length;G++){let H=D[G];if(W(B,H))C.push(H)}return C};class J extends Array{constructor(B,D){super();let C=null;if(typeof B=="string")if(!D)C=Y(B);else D=U(D),C=D.find(B);else if(J.Is(B)){if(C=B,D=B.scope,B=B.selector,B.scope&&D!=B.scope)console.error("Selection.new: given scope differs from first argument's",D,"!=",B.scope)}else if(B)C=J.AsElementList(B);return this.selector=B,this.scope=D,this.isSelection=!0,this.expand(C),this}static Is(B){return B&&B.__class__===J}static IsList(B){return B instanceof J||B instanceof Array||B instanceof NodeList}static IsElement(B){return B&&typeof B.nodeType<"u"&&B.nodeType==Node.ELEMENT_NODE}static IsText(B){return B&&typeof B.nodeType<"u"&&B.nodeType==Node.TEXT_NODE}static IsNode(B){return B&&typeof B.nodeType<"u"}static IsDOM(B){return B&&typeof B.getBBox>"u"}static IsSVG(B){return typeof B.getBBox<"u"}static IsSelection(B){return B instanceof J}static AsElementList(B){if(!B)return B;else if(B.nodeType==Node.ELEMENT_NODE)return[B];else if(B.nodeType==Node.DOCUMENT_FRAGMENT_NODE||B.nodeType==Node.DOCUMENT_NODE){let D=[],C=B.firstElementChild;while(C)D.push(C),C=C.nextSibling;return D}else if(B===window)return J.AsElementList(window.document);else if(J.IsList(B)){let D=[];for(let C=0;C<B.length;C++)D=D.concat(J.AsElementList(B[C]));return D}else return[]}static Ensure(B){return J.Is(B)?B:new J(B)}find(B){if(this.length==0)return new J;let D=[];for(let C=0;C<this.length;C++){let G=this[C],H=Y(B,G);for(let K=0;K<H.length;K++)D.push(H[K])}return new J(D,this)}filter(B){if(typeof B==="string")return new J(A(B,this),this.length>0?this:void 0);else if(typeof B==="function")return new J(Array.prototype.filter.apply(this,[B]));else return console.error("Selection.filter(): selector string or predicate expected, got",B),None}iterate(B){let D=this;for(let C=0;C<D.length;C++)if(B(new J(D[C]),C)===!1)break;return this}like(B){return this.is(B)}is(B){if(typeof B==="string"){let D=this.length>0;for(let C=0;C<this.length;C++)if(!W(B,this[C])){D=!1;break}return D}else return this.equals(B)}list(){return this.map(J.Ensure)}first(){return this.length<=1?this:U([this[0]],this)}last(){return this.length<=1?this:U([this[this.length-1]],this)}eq(B){return this.get(B)}get(B){if(B=B<0?this.length+B:B,this.length==1&&B==0)return this;else return 0<=B<this.length?U([this[B]],this):new J}next(B){let D=[];for(let C=0;C<this.length;C++){let H=this[C].nextElementSibling;if(H&&(!B||W(B,H)))D.push(H)}return D.length>0?U(D,this):new J}prev(B){return this.previous(B)}previous(B){let D=[];for(let C=0;C<this.length;C++){let H=this[C].previousElementSibling;if(H&&(!B||W(B,H)))D.push(H)}return D.length>0?U(D,this):new J}parent(B){let D=[];for(let C=0;C<this.length;C++){let G=this[C].parentNode;if(G&&(!B||W(B,G)))D.push(G)}return D.length>0?U(D,this):new J}ancestors(B,D){return this.parents(B,D)}parents(B,D){let C=[],G=typeof D==="number"?D:-1,H=D&&typeof D!=="number"?U(D):null,K=typeof B==="function",M=typeof B==="string";if(M&&B.endsWith(":first"))B=B.substring(0,B.length-6),index=0;for(let Q=0;Q<this.length;Q++){let P=this[Q].parentNode;while(P){let V=!0;if(B){if(K)V=B(P,Q);else if(M)V=W(B,P)}if(V){if(C.push(P),G>=0&&C.length>=G)return U(C,this)}if(P=P.parentNode,H&&H.contains(P))P=null}}return C.length>0?U(C,this):new J}children(B){let D=[];for(let C=0;C<this.length;C++){let G=this[C];for(let H=0;H<G.childNodes.length;H++){let K=G.childNodes[H];if(J.IsElement(K)&&(!B||W(B,K)))D.push(K)}}return D.length>0?U(D,this):new J}nodes(B){let D=[];for(let C=0;C<this.length;C++){let G=this[C];for(let H=0;H<G.childNodes.length;H++){let K=G.childNodes[H];if(!B||B(K,C,G)!==!1)D.push(K);else return D}}return D}walk(B){if(!B)return this;let D=[],C=0;for(let G=0;G<this.length;G++){let H=this[G];D.push(H);while(D.length>0){let K=D.pop();if(B&&B(K,C++)===!1)return this;for(let M=0;M<K.childNodes.length;M++)D.push(K.childNodes[M])}}return this}append(B){if(this.length==0)return this;let D=this[0];if(J.Is(B))for(let C=0;C<B.length;C++)D.appendChild(B[C]);else if(B&&typeof B.nodeType<"u")D.appendChild(B);else if(J.IsList(B))for(let C=0;C<B.length;C++)this.append(B[C]);else if(typeof B=="string")for(let C=0;C<this.length;C++)this[C].appendChild(document.createTextNode(B));else if(typeof B=="number")for(let C=0;C<this.length;C++)this[C].appendChild(document.createTextNode(B));else if(B)console.error("Selection.append: value is expected to be Number, String, Node, [Node] or Selection, got",B);return this}prepend(B){if(this.length==0)return this;let D=this[0],C=D.firstChild;if(!C)return this.append(B);if(J.Is(B))for(let G=0;G<B.length;G++)D.insertBefore(B[G],C);else if(B&&typeof B.nodeType<"u")D.insertBefore(B,C);else if(J.IsList(B))for(let G=0;G<B.length;G++)this.prepend(B[G]);else if(typeof B=="string")for(let G=0;G<this.length;G++)this[G].insertBefore(document.createTextNode(B),C);else if(typeof B=="number")for(let G=0;G<this.length;G++)this[G].insertBefore(document.createTextNode(B),C);else if(B)console.error("Selection.prepend: value is expected to be Number, String, Node, [Node] or Selection, got",B);return this}remove(){for(let B=0;B<this.length;B++){let D=this[B];if(D.parentNode)D.parentNode.removeChild(D)}return this}extend(B){if(J.IsNode(B))this.push(B);else if(J.IsList(B))for(let D=0;D<B.length;D++)this.extend(B[D]);else console.error("Selection.extend: value must be a node, selection or list, got",B);return this}after(B){if(this.length==0)return this;let D=this[0],C=D;while(C&&!J.IsElement(C.nextSibling))C=C.nextSibling;if(C)if(J.Is(B))for(let G=0;G<B.length;G++)C.parentNode.insertBefore(B[G],C);else if(typeof B.length<"u")for(let G=0;G<B.length;G++)C.parentNode.insertBefore(B[G],C);else if(typeof B.nodeType<"u")C.parentNode.insertBefore(B,C);else console.error("Selection.after: value is expected to be Node, [Node] or Selection, got",B);else if(C=D.parentNode,J.Is(B))for(let G=0;G<B.length;G++)C.appendChild(B[G]);else if(typeof B.length<"u")for(let G=0;G<B.length;G++)C.appendChild(B[G]);else if(typeof B.nodeType<"u")C.appendChild(B);else console.error("Selection.after: value is expected to be Node, [Node] or Selection, got",B);return this}before(B){if(this.length==0)return this;let C=this[0],G=C.parentNode;if(J.Is(B))for(let H=0;H<B.length;H++)G.insertBefore(B[H],C);else if(typeof B.length<"u")for(let H=0;H<B.length;H++)G.insertBefore(B[H],C);else if(typeof B.nodeType<"u")G.insertBefore(B,C);else console.error("Selection.before: value is expected to be Node, [Node] or Selection, got",B);return this}replaceWith(B){if(this.length==0){if(console.warn("Selection.replaceWith: current selection is empty, so given nodes will be removed"),J.IsNode(B)){if(B.parentNode)B.parentNode.removeChild(B)}else if(J.IsSelection(B)||J.IsList(B))for(let D=0;D<B.length;D++){let C=B[D];if(C.parentNode)C.parentNode.removeChild(C)}return this}else{let D=this[0],C=D.parentNode,G=[];if(J.IsNode(B)){if(C)C.insertBefore(B,D);G.push(B)}else if(J.IsSelection(B)||J.IsList(B)){let H=[];for(let K=0;K<B.length;K++){let M=B[K];if(C)C.insertBefore(M,D);H.push(M)}}else console.error("Selection.replaceWith: value is expected to be Node, [Node] or Selection, got",B);while(this.length>0){let H=this.pop();if(H.parentNode)H.parentNode.removeChild(H)}while(G.length>0)this.push(G.pop())}return this}equals(B){if(typeof B==="string")return this.equals(Y(B));else if(B instanceof Array){if(B.length!=this.length)return!1;for(let D=0;D<this.length;D++)if(B[D]!=this[D])return!1;return!0}else if(J.IsElement(B))return this.length==1&&this[0]===B;else return!1}contains(B){if(B instanceof Array||J.IsElement(B)){let D=!0;for(let C=0;D&&C<this.length;C++)D=this.indexOf(B[C])>=0;return D}else return this.indexOf(B)>=0}wrap(B){return B=F(B),B.add(this),B}clone(){if(this.length===0)return new(Object.getPrototypeOf(this)).constructor;let B=void 0;for(let D of this)if(B===void 0)B=new(Object.getPrototypeOf(this)).constructor(D.cloneNode(!0));else B.push(D.cloneNode(!0));return B}empty(){for(let B=0;B<this.length;B++){let D=this[B];while(D.firstChild)D.removeChild(D.firstChild)}return this}isEmpty(){return this.length==0}val(){return this.value()}value(B){if(typeof B>"u"){for(let D=0;D<this.length;D++){let C=this[D];if(typeof C.value<"u")return C.value;else if(C.hasAttribute("contenteditable"))return C.textContent}return}else{B=""+B;for(let D=0;D<this.length;D++){let C=this[D];if(typeof C.value<"u")C.value=B;else if(C.hasAttribute("contenteditable"))C.textContent=B}return this}}text(B){let D=void 0;if(typeof B>"u"){for(let C=0;C<this.length;C++)if(D=this[C].textContent,D)return D;return D}else{B=B===null||B===void 0?"":typeof B==="number"?`${B}`:typeof B==="string"?B:JSON.stringify(B);for(let C=0;C<this.length;C++){let G=this[C];switch(G.nodeName){case"INPUT":case"TEXTAREA":case"SELECT":if(G.value!==B)G.value=B;break;default:G.textContent=B}}return this}}html(B){return this.contents(B)}contents(B){let D=void 0;if(typeof B>"u"){for(let C=0;C<this.length;C++)if(D=this[C].innerHTML,D)return D;return D}else if(!B||typeof B==="string"||typeof B==="number"){B=B||"";for(let C=0;C<this.length;C++){let G=this[C];G.innerHTML=B}return this}else return this.empty().append(B)}attr(B,D){if(typeof B==="string")if(arguments.length==1){for(let C=0;C<this.length;C++){let G=this[C];if(G.hasAttribute(B))return G.getAttribute(B)}return}else{D=typeof D==="string"?D:D===null?D:JSON.stringify(D);for(let C=0;C<this.length;C++){let G=this[C];if(D===null){if(G.hasAttribute(B))G.removeAttribute(B)}else G.setAttribute(B,D)}return this}else if(B){for(let C in B)this.attr(C,B[C]);return this}return this}data(B,D,C){if(!B){for(let G=0;G<this.length;G++){let H=this[G];if(H.dataset){let K={};for(let M in H.dataset){v=H.dataset[M];try{v=JSON.parse(v)}catch(Q){}K[M]=v}return K}else{let K=H.attributes,M=void 0;for(let Q=0;Q<K.length;Q++){let P=K[Q],V=P.name;if(V.startsWith("data-")){let X=P.value;try{X=JSON.parse(X)}catch(I){}M=M||{},M[V.substring(5,V.length)]=X}}return M}}return}else if(typeof B==="string"){let G=`data-${B}`,H=void 0;if(typeof D>"u"){for(let K=0;K<this.length;K++){let M=this[K],Q=void 0;if(M.hasAttribute(G))Q=M.getAttribute(G);let P=typeof M.dataset<"u"?M.dataset[B]:Q;try{P=JSON.parse(P)}catch(V){}if(typeof P<"u")return P}return}else{H=typeof D==="string"?D:JSON.stringify(D);for(let K=0;K<this.length;K++){let M=this[K];if(typeof M.dataset<"u")M.dataset[B]=H;else M.setAttribute(G,H)}return this}}else{for(let G in B)this.data(G,B[G]);return this}}addClass(B){if(B instanceof Array){for(let D=0;D<B.length;D++)this.addClass(B[D]);return this}if(arguments.length>1){for(let D=0;D<arguments.length;D++)this.addClass(arguments[D]);return this}for(let D=0;D<this.length;D++){let C=this[D];if(C.classList)C.classList.add(B);else{let G=C.getAttribute("class");if(G&&G.length>0){let H=G.indexOf(B),K=G.length||0,M=B.length,Q=P-1,P=H+M;if(!((H==0||G[Q]==" ")&&(P==K||G[P]==" ")))C.setAttribute(G+" "+B)}else C.setAttribute(B)}}return this}removeClass(B){for(let D=0;D<this.length;D++){let C=this[D];if(C.classList)C.classList.remove(B);else{let G=C.getAttribute("class");if(G&&G.length>0){let H=G.indexOf(B);if(H>=0){let K=G.length||0,M=B.length,Q="";while(H>=0){let P=V-1,V=H+M;if((H==0||G[P]==" ")&&(V==K||G[V]==" "))Q+=G.substr(0,H);else Q+=G.substr(0,H+M);G=G.substr(H+M)}Q+=G,C.setAttribute("class",Q)}}}}return this}hasClass(B){let D=(B||"").length;for(let C=0;C<this.length;C++){let G=this[C];if(typeof G.classList<"u")return G.classList.contains(B);else{let H=G.className||"";if(H&H.length>0){let K=H.indexOf(B);if(K>=0){let M=H.length||0,Q=K-1,P=K+D+1;if((K==0||H[Q]==" ")&&(K==M||H[P]==" "))return!0}}}}return!1}toggleClass(B,D){let C=U(),G=D instanceof Function;for(let H=0;H<this.length;H++){let K=this[H],M=G?D(K,H):D;if(C.set(this[H]),typeof D>"u")if(C.hasClass(B))C.removeClass(B);else C.addClass(B);else if(M&&!C.hasClass(B))C.addClass(B);else if(!M&&C.hasClass(B))C.removeClass(B)}return this}css(B,D){if(typeof B==="string")if(typeof D>"u"){for(let C=0;C<this.length;C++){let G=document.defaultView.getComputedStyle(this[C],null)[B];if(typeof G<"u")return G}return}else{D=typeof D==="string"?D:D+"px";for(let C=0;C<this.length;C++)this[C].style[B]=D;return this}else{for(let C in B)this.css(C,B[C]);return this}return this}width(){for(let B=0;B<this.length;B++){let C=this[B].getBoundingClientRect();return C.right-C.left}return 0}height(){for(let B=0;B<this.length;B++){let C=this[B].getBoundingClientRect();return C.bottom-C.top}return 0}offset(){for(let B=0;B<this.length;B++){let D=this[B];if(J.IsDOM(D))return{left:D.offsetLeft,top:D.offsetTop};else{let C=D.getBoundingClientRect(),G=D.parentNode.getBoundingClientRect();return{left:C.left-G.left,top:C.top-G.top}}}return}scrollTop(B){let D=B!==void 0;for(let C=0;C<this.length;C++){let G=this[C];if(J.IsDOM(G))if(D)G.scrollTop=B;else return G.scrollTop;else console.error("Selection.scrollTop: Not implemented for SVG")}return}scrollLeft(B){let D=B!==void 0;for(let C=0;C<this.length;C++){let G=this[C];if(J.IsDOM(G))if(D)G.scrollLeft=B;else return G.scrollLeft;else console.error("Selection.scrollLeft: Not implemented for SVG")}return}focus(B){if(typeof B>"u"){for(let D=0;D<this.length;D++){let C=this[D];if(C.focus){if(C.focus(),document.activeElement==C)return this}}return this}else return this.bind("select",B)}select(B){if(typeof B>"u"){let D=window.getSelection();D.removeAllRanges();for(let C=0;C<this.length;C++){let G=this[C];if(G.select)G.select();else{let H=new Range;if(G.nodeType==G.TEXT_NODE)H.selectNode(G);else H.selectNodeContents(G);D.removeAllRanges(),D.addRange(H)}}return this}else return this.bind("select",B)}bind(B,D,C){C=C&&!0;for(let G=0;G<this.length;G++)this[G].addEventListener(B,D,C);return this}unbind(B,D){for(let C=0;C<this.length;C++)this[C].removeEventListener(B,D);return this}trigger(B){if(typeof B==="string"){let D=B;B=document.createEvent("HTMLEvents"),B.initEvent(D,!0,!0)}for(let D=0;D<this.length;D++)this[D].dispatchEvent(B);return this}node(B){if(B=B||0,B=B<0?this.length-B:B,B>=0&&B<this.length)return this[B];else return}set(B){return this.clear().expand(B)}copy(B){return new J().expand(B)}clear(B){return B=B||0,super.splice(B,this.length-B),this}expand(B){if(B==window||B==document)B=document.firstElementChild;if(!B||B.length==0)return this;else if(typeof B==="string")return this.expand(Y(B));else if(J.IsElement(B))this.push(B);else if(B.nodeType==Node.DOCUMENT_NODE)this.expand(B.firstElementChild);else if(B instanceof NodeList||J.IsList(B))for(let D=0;D<B.length;D++)this.expand(B[D]);else console.error("Selection.expand: Unsupported argument",B);return this}}var U=(B,D)=>{return J.Is(B)&&!D?B:new J(B,D)};Object.assign(U,{Selection:J,VERSION:"1.0.0b0",NAME:"select",STATUS:"LOADED",isNode:J.IsNode,isText:J.IsText,filter:A,match:W,query:Y,select:U});var L=U,F=U,R=U;export{U as select,Y as query,A as filter,R as default,J as Selection,L as S,F as $};
